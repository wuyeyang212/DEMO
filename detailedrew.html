<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="css/amazeui.css">
    <link rel="stylesheet" href="css/app.css"> -->
    <!-- 弹窗CSS -->
    <link rel="stylesheet" href="css/isPop.css">
    <link rel="stylesheet" href="css/base.css">
    <!--模糊搜索 style="background:#eef4f9"-->
    <link rel="stylesheet" href="css/jquery-ui-1.9.2.custom.css">
    <style>
        
    </style>

</head>

<body >
    
    <div class="container" id="container">


            <div class="logo">
                <div>
                    <img class="img" src="./image/xiugai.png" alt="">
                    <span class="title">病案首页智能质控</span>
                </div>
            </div>
    
    
            <div class="information">
                <div style="float: left;margin-right: 8px;width: 240px;">
                    <div>
                        <span class="left" style="letter-spacing:3px;">病案号</span>
                        <span class="left">：</span>
                        <span class="right" id="mId">外2019070500032643</span>
                    </div>
                    <div>
                        <span class="left nameLat">姓名</span>
                        <span class="left">：</span>
                        <span class="right" id="name">吴竞波</span>
                    </div>
                    <div>
                        <span class="left">参保类型：</span>
                        <span class="right" id="claimType">职工医保</span>
                    </div>
                </div>
                <div style="float: left;margin-right: 8px;width: 300px;">
                    <div>
                        <span class="left">入组情况：</span>
                        <span class="right" id="guoupInfo">外2019070500032643</span>
                    </div>
                    <div>
                        <span class="left">主要诊断：</span>
                        <span class="right" id="diagnose">K25.9</span>
                    </div>
                    <div>
                        <span class="left">主要操作：</span>
                        <span class="right" id="operation">42.41(部分食管切除术)</span>
                    </div>
                </div>
                <div style="float: left;margin-right: 8px;width: 200px;">
                    <div>
                        <span class="left" style="letter-spacing:3px;">DRG支付标准</span>
                        <span class="left">：</span>
                        <span class="right" id="drgAmount">3000</span>
                        <span class="right">元</span>
                    </div>
                    <!--<div>-->
                        <!--<span class="left">DRG基金支付标准：</span>-->
                        <!--<span class="right" id="drgFundAmount">2300</span>-->
                        <!--<span class="right">元</span>-->
                    <!--</div>-->
                    <div>
                        <span class="left cost">医疗总费用</span>
                        <span class="left">：</span>
                        <span class="right" id="totalAmount">5300</span>
                        <span class="right">元</span>
                    </div>
                </div>
                <div class="compatible">
                    <div>
                        <span class="left allGrade">质量评分：</span>
                        <span class="grade" id="score">87</span>
                        <span class="left code">分</span>
                    </div>
    
                </div>
    
                <div class="line">
                </div>
            </div>
    
    
            <div class="tabbar">
    
                <ul class="tab">
                    <li class="active" style="position:relative;">
                        <span>完整性校验</span>
                        <span class="item" id="fullCheck"></span>
                    </li>
                    <li style="position:relative;">
                        <span>逻辑性校验</span>
                        <span class="item" id="logicCheck"></span>
                    </li>
                    <li style="position:relative;">
                        <span>DRG校验</span>
                        <span class="item" id="alldrgCheck"></span>
                    </li>
                </ul>
    
                <ul class="content">
                    <li style="display: block;">
                        <div class="theOne">
    
                            <table class="dg" cellspacing="0">
                                <thead>
                                <tr class="blueTr">
                                    <th style="width: 300px">违规</th>
                                    <th style="width: 300px;">规则内容</th>
                                    <th style="width: 340px;">修改</th>
                                </tr>
                                </thead>
                                <tbody id="fullCheckResult"></tbody>
                            </table>
                        </div>
                    </li>
    
                    <li>
                        <div class="theOne">
    
                            <table class="dg" cellspacing="0">
                                <thead>
                                <tr class="blueTr">
                                    <th style="width: 200px">违规</th>
                                    <th style="width: 350px;">规则内容</th>
                                    <th>修改</th>
                                </tr>
                                </thead>
                                <tbody id="logicCheckResult"></tbody>
    
                            </table>
                        </div>
                    </li>
    
                    <li>
                        <div>
                            <div class="lightHeight" id="unreasonable">
                                不合理原因：<span  id="unreasontext"></span>
                            </div>
    
                            <table class="dg leftText" cellspacing="0">
                                <thead>
                                <tr class="blueTr">
                                    <th style="width: 120px">字段名</th>
                                    <th style="width: 120px">ICD-10</th>
                                    <th>ICD-10中文名称</th>
                                    <th>修改</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody id="drgDiagnoseFieldResult"></tbody>
    
                            </table>
    
                            <table class="dg leftText" cellspacing="0">
                                <thead>
                                <tr class="blueTr">
                                    <th style="width: 120px">字段名</th>
                                    <th style="width: 120px">ICD-9</th>
                                    <th>ICD-9中文名称</th>
                                    <th>修改</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody id="drgOperationFieldResult"></tbody>
                            </table>
                        </div>
                    </li>
                </ul>
    
                <ul style="margin-top: 15px;">
                    <div style="float: left;">
                        <img src="image/warning.png" alt="">
                        <span>预警：必填</span>
                        <br>
                        <img src="image/tips.png" alt="">
                        <span>提示：满足相关要求后不可修改</span>
                    </div>
                    <div style="float: right;">
                        <button class="bgc">效验</button>
                        <button class="Baocun">提交</button>
                    </div>
                </ul>

            </div>
    
        
    </div>
    
    
    



    

    
</body>
<!-- import jquery -->
<script src="js/jquery-1.8.3.js"></script>

<script src="js/jquery.cssforms.js"></script>

<!--模糊搜索-->
<script src="js/jquery-ui-1.9.2.custom.js"></script>
<script>
    $(function () {
        //选项卡
        $('.tab').find('li').click(function () {
            var index = $(this).index();
            $(this).addClass('active').siblings().removeClass('active');
            $('.content').find('li').eq(index).show().siblings().hide();
        })
    })
    function child(d){
        var newData = d
        console.log(newData)
        
        $('#mId').text(newData.mId)
        $('#name').text(newData.name)
        $('#claimType').text(newData.claimType)
        $('#guoupInfo').text(newData.groupInfo)
        $('#diagnose').text(newData.diagnose)
        $('#operation').text(newData.operation)
        $('#drgAmount').text(newData.drgAmount)
        // $('#drgFundAmount').text(newData.drgFundAmount)
        $('#totalAmount').text(newData.totalAmount)
        $('#score').text(newData.score)
        //消息提醒
        $('#fullCheck').text(newData.fullCheckResult.length)
        $('#logicCheck').text(newData.logicCheckResult.length)
        $('#alldrgCheck').text(newData.drgCheckResult.length)
        //不合理原因
        var unreasonableStr = '';
        for (var i = 0; i < newData.drgCheckResult.length; i++) {
            unreasonableStr += "<span>" + newData.drgCheckResult[i].reason + "</span>"
        }
        $("#unreasontext").append(unreasonableStr)

        //省市区的数组
        var arrContry = [ 'JN480','JN481','JN482']
        //完整性校验结果集
        var str = '';
        var kksui = newData.fullCheckResult
        for (var i = 0; i < newData.fullCheckResult.length; i++) {

            str += "<tr>";
            if (newData.fullCheckResult[i].type == 1) {
                str += "<td><img src='image/warning.png' alt='' class='tipaImg'>" + newData.fullCheckResult[i].fieldMeaning + " [" + newData.fullCheckResult[i].fieldValve + "]" + "</td>"
            } else {
                str += "<td><img src='image/tips.png' alt='' class='tipaImg'>" + newData.fullCheckResult[i].fieldMeaning + " [" + newData.fullCheckResult[i].fieldValve + "]" + "</td>"
            }

            str += "<td>" + newData.fullCheckResult[i].reason + "</td>"

            // if (newData.fullCheckResult[i].showType == "1"&& arrContry.indexOf(newData.fullCheckResult[i].fId)>-1) {
            if (newData.fullCheckResult[i].showType == "1"&& arrContry.in_array(newData.fullCheckResult[i].fId)) {
                str += "<td><input showType='"+newData.fullCheckResult[i].showType+"' fId='" + newData.fullCheckResult[i].fId + "' rangeId='" + newData.fullCheckResult[i].rangeId + "' onmouseover='selectClick(this,"+ JSON.stringify(kksui[i].rangeList) +")'  id='DUI" + i + "'type='text' class='cioso inputContent' autocomplete='off' ><input type='hidden' value='" + newData.fullCheckResult[i].rangeId + "'>" +
                    "<div class='control-group' style='text-align: center'><div class='controls'><select name='location_p' id='location_p'>"+newData.fullCheckResult[i].fId[0]+"</select><br><select name='location_c' id='location_c'>"+newData.fullCheckResult[i].fId[1]+"</select><br><select name='location_a' id='location_a'>"+newData.fullCheckResult[i].fId[2]+"</select></div></div>" +"</td>"
            }
            // else if (newData.fullCheckResult[i].showType == "1" && arrContry.indexOf(newData.fullCheckResult[i].fId)<=-1) {
            else if (newData.fullCheckResult[i].showType == "1" && !arrContry.in_array(newData.fullCheckResult[i].fId)) {

                str += "<td><input  showType='"+newData.fullCheckResult[i].showType+"' fId='" + newData.fullCheckResult[i].fId + "' rangeId='" + newData.fullCheckResult[i].rangeId + "' onmouseover='selectClick(this,"+ JSON.stringify(kksui[i].rangeList) +")'  id='DUI" + i + "'type='text' class='cioso inputContent' autocomplete='off' ><input type='hidden' value='" + newData.fullCheckResult[i].rangeId + "'></td>"
            }
            // else if (newData.fullCheckResult[i].showType == "2"&& arrContry.indexOf(newData.fullCheckResult[i].fId)>-1) {
            else if (newData.fullCheckResult[i].showType == "2"&& arrContry.in_array(newData.fullCheckResult[i].fId)) {

                str += "<td><input fId='" + newData.fullCheckResult[i].fId + "' rangeId='" + newData.fullCheckResult[i].rangeId + "' onclick='drgclick10(this)'  id='DUI" + i + "'type='text' class='cioso inputContent' autocomplete='off' ><input type='hidden' value='" + newData.fullCheckResult[i].rangeId + "'>" +
                    "<div class='control-group' style='text-align: center'><div class='controls'><select name='location_p' id='location_p'>"+newData.fullCheckResult[i].fId[0]+"</select><br><select name='location_c' id='location_c'>"+newData.fullCheckResult[i].fId[1]+"</select><br><select name='location_a' id='location_a'>"+newData.fullCheckResult[i].fId[2]+"</select></div></div>" +"</td>"
            }
            // else if (newData.fullCheckResult[i].showType == "2" && arrContry.indexOf(newData.fullCheckResult[i].fId)<=-1) {
            else if (newData.fullCheckResult[i].showType == "2" && !arrContry.in_array(newData.fullCheckResult[i].fId)) {

                str += "<td><input fId='" + newData.fullCheckResult[i].fId + "' rangeId='" + newData.fullCheckResult[i].rangeId + "' onclick='drgclick10(this)'  id='DUI" + i + "'type='text' class='cioso inputContent' autocomplete='off' ><input type='hidden' value='" + newData.fullCheckResult[i].rangeId + "'></td>"
            }
            // else if (newData.fullCheckResult[i].showType == "3"&& arrContry.indexOf(newData.fullCheckResult[i].fId)>-1) {
            else if (newData.fullCheckResult[i].showType == "3"&& arrContry.in_array(newData.fullCheckResult[i].fId)) {
                str += "<td><input fId='" + newData.fullCheckResult[i].fId + "' rangeId='" + newData.fullCheckResult[i].rangeId + "' onclick='drgclick(this)'  id='DUI" + i + "'type='text' class='cioso inputContent' autocomplete='off' ><input type='hidden' value='" + newData.fullCheckResult[i].rangeId + "'>" +
                    "<div class='control-group' style='text-align: center'><div class='controls'><select name='location_p' id='location_p'>"+newData.fullCheckResult[i].fId[0]+"</select><br><select name='location_c' id='location_c'>"+newData.fullCheckResult[i].fId[1]+"</select><br><select name='location_a' id='location_a'>"+newData.fullCheckResult[i].fId[2]+"</select></div></div>" +"</td>"
            }
            //else if (newData.fullCheckResult[i].showType == "3" &&  arrContry.indexOf(newData.fullCheckResult[i].fId)<=-1) {
            else if (newData.fullCheckResult[i].showType == "3" &&  !arrContry.in_array(newData.fullCheckResult[i].fId)) {
                str += "<td><input fId='" + newData.fullCheckResult[i].fId + "' rangeId='" + newData.fullCheckResult[i].rangeId + "' onclick='drgclick(this)'  id='DUI" + i + "'type='text' class='cioso inputContent' autocomplete='off' ><input type='hidden' value='" + newData.fullCheckResult[i].rangeId + "'></td>"
            }
            //else if (newData.fullCheckResult[i].showType == "0"&& arrContry.indexOf(newData.fullCheckResult[i].fId)>-1) {
            else if (newData.fullCheckResult[i].showType == "0"&& arrContry.in_array(newData.fullCheckResult[i].fId)) {
                str += "<td><input fId='" + newData.fullCheckResult[i].fId + "' id='DUI" + i + "'type='text' class='inputContent' autocomplete='off' >"+
                    "<div class='control-group' style='text-align: center;'><div class='controls'><select name='location_p' id='location_p'>"+newData.fullCheckResult[i].fId[0]+"</select><br><select name='location_c' id='location_c'>"+newData.fullCheckResult[i].fId[1]+"</select><br><select name='location_a' id='location_a'>"+newData.fullCheckResult[i].fId[2]+"</select></div></div>" +"</td>"
            }
            else {
                str += "<td><input fId='" + newData.fullCheckResult[i].fId + "' id='DUI" + i + "'type='text' class='inputContent' autocomplete='off' ></td>"
            }

            str += "</tr>"

        }
        $("#fullCheckResult").append(str)


        //逻辑性校验结果集
        var str1 = '';
        var yylogn = newData.logicCheckResult;
        for (var i = 0; i < newData.logicCheckResult.length; i++) {
            str1 += "<tr>";
            if (newData.logicCheckResult[i].type == 1) {
                str1 += "<td><img src='image/warning.png' alt='' class='tipaImg'>" + newData.logicCheckResult[i].fieldMeaning + " [" + newData.logicCheckResult[i].fieldValve + "]" + "</td>"
            } else {
                str1 += "<td><img src='image/tips.png' alt='' class='tipaImg'>" + newData.logicCheckResult[i].fieldMeaning + " [" + newData.logicCheckResult[i].fieldValve + "]" + "</td>"
            }
            str1 += "<td>" + newData.logicCheckResult[i].reason + "</td>"
            // console.log(newData.logicCheckResult[i].showType);
            if (newData.logicCheckResult[i].showType == "2") {
                str1 += "<td><input fId='" + newData.logicCheckResult[i].fId + "' rangeId='" + newData.logicCheckResult[i].rangeId + "' onclick='drgclick10(this)' id='LOG" + i + "'type='text' class='ciosio inputContent' autocomplete='off' ><input type='hidden' value='" + newData.logicCheckResult[i].rangeId + "'></td>"
            } else if (newData.logicCheckResult[i].showType == "3") {
                str1 += "<td><input fId='" + newData.logicCheckResult[i].fId + "' rangeId='" + newData.logicCheckResult[i].rangeId + "' onclick='drgclick(this)' id='LOG" + i + "'type='text' class='ciosio inputContent' autocomplete='off' ><input type='hidden' value='" + newData.logicCheckResult[i].rangeId + "'></td>"
            } else if (newData.logicCheckResult[i].showType == "1") {
                str1 += "<td><input showType='"+newData.logicCheckResult[i].showType+"' fId='" + newData.logicCheckResult[i].fId + "' rangeId='" + newData.logicCheckResult[i].rangeId + "' onclick='selectClick(this,"+ JSON.stringify(yylogn[i].rangeList) +")' id='LOG" + i + "'type='text' class='ciosio inputContent' autocomplete='off' ><input type='hidden' value='" + newData.logicCheckResult[i].rangeId + "'></td>"
            } else {
                str1 += "<td><input  showType='"+newData.logicCheckResult[i].showType+"' fId='" + newData.logicCheckResult[i].fId + "' id='LOG" + i + "'type='text' class='inputContent' autocomplete='off' ></td>"
            }

            str1 += "</tr>"

        }
        $("#logicCheckResult").append(str1)

        //诊断结果集ICD10
        var str2 = '';
        for (var i = 0; i < newData.drgDiagnoseFieldResult.length; i++) {
            // console.log(newData.drgDiagnoseFieldResult[i].showType);
            str2 += "<tr>";
            str2 += "<td>" + newData.drgDiagnoseFieldResult[i].fieldName + "</td>"
            str2 += "<td id='"+ newData.drgDiagnoseFieldResult[i].codeId +"'>" + newData.drgDiagnoseFieldResult[i].code + "</td>"
            str2 += "<td id='"+ newData.drgDiagnoseFieldResult[i].nameId +"'>" + newData.drgDiagnoseFieldResult[i].name + "</td>"
            str2 += "<td><input codeId='"+ newData.drgDiagnoseFieldResult[i].codeId +"' id='DRGDF" + i + "' onclick='drgEvent(this)' type='text' class='inputContent' autocomplete='off' value='' ></td>"
            str2 += "<td><span class='moveUpOrDown'>上移</span> | <span class='moveUpOrDown'>下移</span> | <span class='moveUpOrDown'>置顶</span></td>"
            str2 += "</tr>"
        }
        $("#drgDiagnoseFieldResult").append(str2)

        //手术操作结果集ICD9
        var str3 = '';
        for (var i = 0; i < newData.drgOperationFieldResult.length; i++) {
            // console.log(newData.drgDiagnoseFieldResult[i].showType);
            str3 += "<tr>";
            str3 += "<td>" + newData.drgOperationFieldResult[i].fieldName + "</td>"
            str3 += "<td id='"+ newData.drgOperationFieldResult[i].codeId +"'>" + newData.drgOperationFieldResult[i].code + "</td>"
            str3 += "<td id='"+ newData.drgOperationFieldResult[i].nameId +"'>" + newData.drgOperationFieldResult[i].name + "</td>"
            str3 += "<td><input codeId='"+ newData.drgOperationFieldResult[i].codeId +"' id='DRGOF" + i + "' rangeid='DMB01' onclick='drgEventor(this)' type='text' class='inputContent' autocomplete='off' ></td>"
            str3 += "<td><span class='moveUpOrDown'>上移</span> | <span class='moveUpOrDown'>下移</span> | <span class='moveUpOrDown'>置顶</span></td>"
            str3 += "</tr>"
        }
        $("#drgOperationFieldResult").append(str3)
    }
    

    
</script>
</html>